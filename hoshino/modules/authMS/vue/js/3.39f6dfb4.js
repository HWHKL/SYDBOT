(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"25b6":function(e,t,s){"use strict";var a=s("862c"),i=s.n(a);i.a},"862c":function(e,t,s){},ad61:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"doc-page"},[s("div",{staticClass:"q-pa-md"},[s("q-table",{attrs:{title:"Treats",data:e.data,columns:e.columns,"row-key":"key",selection:"multiple",selected:e.selected,filter:e.filter},on:{"update:selected":function(t){e.selected=t}},scopedSlots:e._u([{key:"top",fn:function(){return[s("div",{staticClass:"q-table__title row"},[e._v("\n          充值卡密管理\n        ")]),s("q-space"),s("div",{staticClass:"row"},[s("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),s("q-btn",{staticClass:"q-mr-xs",attrs:{color:"positive"},on:{click:e.output}},[e._v("导出")]),s("q-btn",{staticClass:"q-mr-xs",attrs:{color:"info"},on:{click:e.updateKey}},[e._v("刷新")]),s("q-btn",{staticClass:"q-mr-xs",attrs:{color:"secondary"},on:{click:function(t){e.isAdd=!0}}},[e._v("添加")]),s("q-btn",{staticClass:"q-mr-xs",attrs:{color:"primary"},on:{click:function(t){return e.modifySelect()}}},[e._v("修改")]),s("q-btn",{staticClass:"q-mr-xs",attrs:{color:"negative"},on:{click:e.deleteSelect}},[e._v("删除")])],1)]},proxy:!0}])})],1),s("q-dialog",{model:{value:e.isAdd,callback:function(t){e.isAdd=t},expression:"isAdd"}},[s("q-card",{staticClass:"flex flex-center"},[s("div",{staticClass:"q-pa-md",staticStyle:{width:"480px"}},[s("q-form",{staticClass:"q-gutter-md"},[s("q-input",{attrs:{filled:"",type:"number",label:"时长","lazy-rules":"",rules:[function(e){return null!==e&&e>0},"请正确的时长!"]},model:{value:e.duration,callback:function(t){e.duration=t},expression:"duration"}}),s("q-input",{attrs:{filled:"",type:"number",label:"数量","lazy-rules":"",rules:[function(e){return null!==e&&e>0},"请正确的数量!"]},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}}),s("div",{attrs:{align:"center"}},[s("q-btn",{attrs:{label:"Submit",color:"primary"},on:{click:function(t){return e.onSubmit()}}})],1)],1)],1)])],1)],1)},i=[],l=s("18d6"),n={data(){return{filter:"",selected:[],columns:[{name:"key",required:!0,label:"充值卡密",align:"left",field:e=>e.key,format:e=>""+e,sortable:!0},{name:"duration",align:"right",label:"时长",field:"duration",sortable:!0,sort:(e,t)=>parseInt(e,10)-parseInt(t,10)}],data:[],isAdd:!1,num:1,duration:30}},methods:{updateKey(){this.$axios.get("/get/key?password="+l["a"].getItem("password")).then(e=>{this.data=e.data})},deleteSelect(){this.$q.dialog({title:"Confirm",message:"此操作将永久删除, 是否继续?",cancel:!0,persistent:!0}).onOk(()=>{}).onOk(()=>{this.selected.forEach(e=>{this.deleteItem(e)}),this.updateKey(),this.message("成功","删除完毕!")})},deleteItem(e){this.$axios.delete("del/key?key="+e.key)},modifySelect(){this.$q.dialog({title:"修改",message:"请填写注册码的授权时长",prompt:{model:"",isValid:e=>e.length>0,type:"number"},cancel:!0,persistent:!0}).onOk(e=>{this.selected.forEach(t=>{this.modifyItem(t,e)}),this.updateKey(),this.message("成功","修改完毕!")})},modifyItem(e,t){this.$axios.post("update/key?key="+e.key+"&duration="+t)},message(e,t){this.$q.dialog({title:e,message:t,html:!0})},output(){let e="";this.selected.forEach(t=>{e=e+"卡密:"+t.key+"<br>时长:"+t.duration+"天<br>"}),this.message("导出卡密",e)},onSubmit(){this.$axios.post("add/key?duration="+this.duration+"&num="+this.num).then(e=>{e&&(this.message("成功","添加完成!"),this.isAdd=!1,this.updateKey())}).catch(e=>{console.log(e)})}},created(){this.updateKey()}},o=n,r=(s("25b6"),s("2877")),c=s("9989"),d=s("eaac"),u=s("2c91"),m=s("27f9"),p=s("0016"),f=s("9c40"),h=s("24e8"),b=s("f09f"),y=s("0378"),k=s("eebe"),q=s.n(k),g=Object(r["a"])(o,a,i,!1,null,null,null);t["default"]=g.exports;q()(g,"components",{QPage:c["a"],QTable:d["a"],QSpace:u["a"],QInput:m["a"],QIcon:p["a"],QBtn:f["a"],QDialog:h["a"],QCard:b["a"],QForm:y["a"]})}}]);