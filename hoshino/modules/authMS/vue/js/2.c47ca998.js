(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"25b6":function(t,e,a){"use strict";var s=a("862c"),i=a.n(s);i.a},"862c":function(t,e,a){},ad61:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"doc-page"},[a("div",{staticClass:"q-pa-md"},[a("q-table",{attrs:{title:"Treats",data:t.data,columns:t.columns,"row-key":"key",selection:"multiple",selected:t.selected},on:{"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"top",fn:function(){return[a("div",{staticClass:"q-table__title row"},[t._v("\n          充值卡密管理\n        ")]),a("q-space"),a("div",{staticClass:"row"},[a("q-btn",{staticClass:"q-mr-xs",attrs:{color:"positive"},on:{click:t.output}},[t._v("导出")]),a("q-btn",{staticClass:"q-mr-xs",attrs:{color:"info"},on:{click:t.updateKey}},[t._v("刷新")]),a("q-btn",{staticClass:"q-mr-xs",attrs:{color:"secondary"},on:{click:function(e){t.isAdd=!0}}},[t._v("添加")]),a("q-btn",{staticClass:"q-mr-xs",attrs:{color:"primary"},on:{click:function(e){return t.modifySelect()}}},[t._v("修改")]),a("q-btn",{staticClass:"q-mr-xs",attrs:{color:"negative"},on:{click:t.deleteSelect}},[t._v("删除")])],1)]},proxy:!0}])})],1),a("q-dialog",{model:{value:t.isAdd,callback:function(e){t.isAdd=e},expression:"isAdd"}},[a("q-card",{staticClass:"flex flex-center"},[a("div",{staticClass:"q-pa-md",staticStyle:{width:"480px"}},[a("q-form",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{filled:"",type:"number",label:"时长","lazy-rules":"",rules:[function(t){return null!==t&&t>0},"请正确的时长!"]},model:{value:t.duration,callback:function(e){t.duration=e},expression:"duration"}}),a("q-input",{attrs:{filled:"",type:"number",label:"数量","lazy-rules":"",rules:[function(t){return null!==t&&t>0},"请正确的数量!"]},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}),a("div",{attrs:{align:"center"}},[a("q-btn",{attrs:{label:"Submit",color:"primary"},on:{click:function(e){return t.onSubmit()}}})],1)],1)],1)])],1)],1)},i=[],l=a("18d6"),n={data(){return{selected:[],columns:[{name:"key",required:!0,label:"充值卡密",align:"left",field:t=>t.key,format:t=>""+t,sortable:!0},{name:"duration",align:"right",label:"时长",field:"duration",sortable:!0,sort:(t,e)=>parseInt(t,10)-parseInt(e,10)}],data:[{key:"error",duration:114},{key:"请清理浏览器缓存",duration:514}],isAdd:!1,num:1,duration:30}},methods:{updateKey(){this.$axios.get("/get/key?password="+l["a"].getItem("password")).then(t=>{this.data=t.data})},deleteSelect(){this.$q.dialog({title:"Confirm",message:"此操作将永久删除, 是否继续?",cancel:!0,persistent:!0}).onOk(()=>{}).onOk(()=>{this.selected.forEach(t=>{this.deleteItem(t)}),this.updateKey(),this.message("成功","删除完毕!")})},deleteItem(t){this.$axios.delete("del/key?key="+t.key)},modifySelect(){this.$q.dialog({title:"修改",message:"请填写注册码的授权时长",prompt:{model:"",isValid:t=>t.length>0,type:"number"},cancel:!0,persistent:!0}).onOk(t=>{this.selected.forEach(e=>{this.modifyItem(e,t)}),this.updateKey(),this.message("成功","修改完毕!")})},modifyItem(t,e){this.$axios.post("update/key?key="+t.key+"&duration="+e)},message(t,e){this.$q.dialog({title:t,message:e,html:!0})},output(){let t="";this.selected.forEach(e=>{t=t+"卡密:"+e.key+"<br>时长:"+e.duration+"天<br>"}),this.message("导出卡密",t)},onSubmit(){this.$axios.post("add/key?duration="+this.duration+"&num="+this.num).then(t=>{t&&(this.message("成功","添加完成!"),this.isAdd=!1,this.updateKey())}).catch(t=>{console.log(t)})}},created(){this.updateKey()}},o=n,r=(a("25b6"),a("2877")),c=a("9989"),d=a("eaac"),u=a("2c91"),m=a("9c40"),p=a("24e8"),f=a("f09f"),h=a("0378"),y=a("27f9"),b=a("eebe"),k=a.n(b),g=Object(r["a"])(o,s,i,!1,null,null,null);e["default"]=g.exports;k()(g,"components",{QPage:c["a"],QTable:d["a"],QSpace:u["a"],QBtn:m["a"],QDialog:p["a"],QCard:f["a"],QForm:h["a"],QInput:y["a"]})}}]);